{"ast":null,"code":"import _regeneratorRuntime from\"/home/erikpeteri/redux-anecdotes-ci-cd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/erikpeteri/redux-anecdotes-ci-cd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/erikpeteri/redux-anecdotes-ci-cd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import anecdoteService from'../services/anecdotes';import{createSlice}from'@reduxjs/toolkit';var anecdoteSlice=createSlice({name:'anecdotes',initialState:[],reducers:{incrementVote:function incrementVote(state,action){var id=action.payload;return state.map(function(anecdote){if(anecdote.id===id){return _objectSpread(_objectSpread({},anecdote),{},{votes:anecdote.votes+1});}return anecdote;});},appendAnecdote:function appendAnecdote(state,action){state.push(action.payload);},setAnecdotes:function setAnecdotes(state,action){return action.payload;}}});var _anecdoteSlice$action=anecdoteSlice.actions,incrementVote=_anecdoteSlice$action.incrementVote,appendAnecdote=_anecdoteSlice$action.appendAnecdote,setAnecdotes=_anecdoteSlice$action.setAnecdotes;export{incrementVote,appendAnecdote,setAnecdotes};export var initializeAnecdotes=function initializeAnecdotes(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var anecdotes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return anecdoteService.getAll();case 2:anecdotes=_context.sent;dispatch(setAnecdotes(anecdotes));case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var createAnecdote=function createAnecdote(content){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var newAnecdote;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return anecdoteService.createNew(content);case 2:newAnecdote=_context2.sent;dispatch(appendAnecdote(newAnecdote));case 4:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var anecdoteVote=function anecdoteVote(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var updateVote;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return anecdoteService.addLike(id);case 2:updateVote=_context3.sent;dispatch(incrementVote(updateVote.id));case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default anecdoteSlice.reducer;","map":{"version":3,"names":["anecdoteService","createSlice","anecdoteSlice","name","initialState","reducers","incrementVote","state","action","id","payload","map","anecdote","votes","appendAnecdote","push","setAnecdotes","actions","initializeAnecdotes","dispatch","getAll","anecdotes","createAnecdote","content","createNew","newAnecdote","anecdoteVote","addLike","updateVote","reducer"],"sources":["/home/erikpeteri/redux-anecdotes-ci-cd/src/reducers/anecdoteReducer.js"],"sourcesContent":["import anecdoteService from '../services/anecdotes'\nimport { createSlice } from '@reduxjs/toolkit'\n\nconst anecdoteSlice = createSlice({\n  name: 'anecdotes',\n  initialState: [],\n  reducers: {\n    incrementVote(state, action) {\n      const id = action.payload\n      return state.map(anecdote => {\n        if (anecdote.id === id) {\n          return {\n            ...anecdote,\n            votes: anecdote.votes + 1\n          }\n        }\n        return anecdote\n      })\n    },\n    appendAnecdote(state, action) {\n      state.push(action.payload)\n    },\n    setAnecdotes(state, action) {\n      return action.payload\n    }\n  }\n})\n\nexport const { incrementVote, appendAnecdote, setAnecdotes } = anecdoteSlice.actions\n\nexport const initializeAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll()\n    dispatch(setAnecdotes(anecdotes))\n  }\n}\n\nexport const createAnecdote = content => {\n  return async dispatch => {\n    const newAnecdote = await anecdoteService.createNew(content)\n    dispatch(appendAnecdote(newAnecdote))\n  }\n}\n\nexport const anecdoteVote = id => {\n  return async dispatch => {\n    const updateVote = await anecdoteService.addLike(id)\n    dispatch(incrementVote(updateVote.id))\n  }\n}\n\nexport default anecdoteSlice.reducer\n"],"mappings":"mYAAA,MAAOA,gBAAe,KAAM,uBAAuB,CACnD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,GAAMC,cAAa,CAAGD,WAAW,CAAC,CAChCE,IAAI,CAAE,WAAW,CACjBC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,CACRC,aAAa,wBAACC,KAAK,CAAEC,MAAM,CAAE,CAC3B,GAAMC,GAAE,CAAGD,MAAM,CAACE,OAAO,CACzB,MAAOH,MAAK,CAACI,GAAG,CAAC,SAAAC,QAAQ,CAAI,CAC3B,GAAIA,QAAQ,CAACH,EAAE,GAAKA,EAAE,CAAE,CACtB,sCACKG,QAAQ,MACXC,KAAK,CAAED,QAAQ,CAACC,KAAK,CAAG,CAAC,GAE7B,CACA,MAAOD,SAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CACDE,cAAc,yBAACP,KAAK,CAAEC,MAAM,CAAE,CAC5BD,KAAK,CAACQ,IAAI,CAACP,MAAM,CAACE,OAAO,CAAC,CAC5B,CAAC,CACDM,YAAY,uBAACT,KAAK,CAAEC,MAAM,CAAE,CAC1B,MAAOA,OAAM,CAACE,OAAO,CACvB,CACF,CACF,CAAC,CAAC,CAEK,0BAAwDR,aAAa,CAACe,OAAO,CAArEX,aAAa,uBAAbA,aAAa,CAAEQ,cAAc,uBAAdA,cAAc,CAAEE,YAAY,uBAAZA,YAAY,CAA0B,kDAEpF,MAAO,IAAME,oBAAmB,CAAG,QAAtBA,oBAAmB,EAAS,CACvC,iGAAO,iBAAMC,QAAQ,uJACKnB,gBAAe,CAACoB,MAAM,EAAE,QAA1CC,SAAS,eACfF,QAAQ,CAACH,YAAY,CAACK,SAAS,CAAC,CAAC,sDAClC,+DACH,CAAC,CAED,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAGC,OAAO,CAAI,CACvC,kGAAO,kBAAMJ,QAAQ,8JACOnB,gBAAe,CAACwB,SAAS,CAACD,OAAO,CAAC,QAAtDE,WAAW,gBACjBN,QAAQ,CAACL,cAAc,CAACW,WAAW,CAAC,CAAC,wDACtC,iEACH,CAAC,CAED,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAY,CAAGjB,EAAE,CAAI,CAChC,kGAAO,kBAAMU,QAAQ,6JACMnB,gBAAe,CAAC2B,OAAO,CAAClB,EAAE,CAAC,QAA9CmB,UAAU,gBAChBT,QAAQ,CAACb,aAAa,CAACsB,UAAU,CAACnB,EAAE,CAAC,CAAC,wDACvC,iEACH,CAAC,CAED,cAAeP,cAAa,CAAC2B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}